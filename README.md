[English](README_EN.md)

# ماژول تاریخ جلالی (شمسی) برای Akaunting

این ماژول پشتیبانی کامل از تقویم جلالی (شمسی) را برای Akaunting نسخه ۳.۱ فراهم می‌کند. این ماژول به طور یکپارچه با هسته Akaunting ادغام شده و تمام تاریخ‌ها را سمت کاربر (کلاینت) تبدیل می‌کند.

<p align="center"><img src="https://aramisteam.com/akaunting-git.jpg" /></p>

## ⚠️ ارتقاء از نسخه ۱ به نسخه ۲

**مهم:** نسخه ۲ تغییرات اساسی و سازگار با گذشته ندارد. کاربران باید نسخه قدیمی را کاملاً حذف کرده و سپس نسخه جدید را نصب کنند.

### تغییرات اساسی نسخه ۲:

- **منطق کاملاً تغییر کرده:** در نسخه قبلی، تبدیل تاریخ سمت سرور انجام می‌شد. در نسخه جدید، تمام تبدیل‌ها فقط سمت کاربر (کلاینت) انجام می‌شود.
- **سیستم تنظیمات پیشرفته:** امکان فعال/غیرفعال کردن نمایش تاریخ شمسی و انتخابگر تاریخ اضافه شده.
- **انتخابگر دوگانه:** امکان انتخاب بین تقویم میلادی و شمسی با سوئیچر.
- **قالب فاکتور فارسی:** قالب اختصاصی فاکتور با قابلیت شخصی‌سازی فیلدها.
- **فونت فارسی:** فونت وزیرمتن برای نمایش صحیح متن فارسی.

## ویژگی‌ها

- **انتخابگر تاریخ دوگانه:** امکان انتخاب بین تقویم میلادی و شمسی با سوئیچر کاربرپسند در تمام فیلدهای تاریخ.
- **تبدیل سمت کلاینت:** تمام تبدیل‌های تاریخ فقط در مرورگر کاربر انجام می‌شود، بدون تغییر داده‌ها در سرور.
- **سیستم تنظیمات پیشرفته:** کنترل کامل بر نمایش تاریخ‌ها و انتخابگرها از طریق پنل تنظیمات.
- **قالب فاکتور فارسی:** قالب اختصاصی فاکتور با فیلدهای قابل تنظیم و فونت فارسی.
- **فونت وزیرمتن:** استفاده از فونت وزیرمتن برای نمایش صحیح متن و اعداد فارسی.
- **سازگاری کامل:** بدون تغییر در فایل‌های هسته Akaunting کار می‌کند.

## کتابخانه‌های استفاده شده

این ماژول بر پایه کتابخانه‌های زیر ساخته شده است:

- **بک‌اند:** [morilog/jalali](https://github.com/morilog/jalali) - برای تبدیل‌های تاریخ در PHP (فقط برای قالب‌بندی سمت سرور).
- **فرانت‌اند:**
  - [jalaali-js](https://github.com/jalaali/jalaali-js) - برای تبدیل تاریخ‌های جلالی در جاوااسکریپت.
  - [jalalidatepicker](https://github.com/jalalidatepicker/jalalidatepicker) - برای رابط کاربری انتخابگر تاریخ جلالی.
- **فونت:** [Vazirmatn](https://github.com/rastikerdar/vazirmatn) - فونت آزاد فارسی وزیرمتن.

## نصب و راه‌اندازی

### ⚠️ نکات مهم ارتقاء:

اگر نسخه ۱ را نصب دارید، ابتدا آن را کامل حذف کنید:

```bash
# ماژول را حذف کنید
php artisan module:uninstall JalaliDate 1
# یا فایل‌های ماژول را از دایرکتوری modules حذف کنید
rm -rf <your-akaunting-root>/modules/JalaliDate
```

### مراحل نصب:

۱. **دانلود ماژول:**
شما سه گزینه برای دریافت فایل‌های ماژول دارید:

- **گزینه اول (توصیه شده):** آخرین نسخه پایدار را از صفحه [**انتشارها در گیت‌هاب**](https://github.com/Abdipour/akaunting-jalali-date/releases) دانلود کنید.
- **گزینه دوم (دانلود مستقیم):** آخرین نسخه در حال توسعه را مستقیماً به صورت [**فایل ZIP**](https://github.com/Abdipour/akaunting-jalali-date/archive/refs/heads/main.zip) دانلود کنید.
- **گزینه سوم (کلون کردن):** ریپازیتوری را در دایرکتوری `modules` Akaunting خود کلون کنید.

مسیر نهایی باید به این شکل باشد:

```bash
<your-akaunting-root>/modules/JalaliDate/
```

۲. **نصب وابستگی‌ها:**
در ترمینال به دایرکتوری ماژول بروید و وابستگی‌های لازم Composer و NPM را نصب کنید.

```bash
cd <your-akaunting-root>/modules/JalaliDate
composer install
npm install
```

۳. **کامپایل فایل‌های فرانت‌اند:**
فایل‌های جاوااسکریپت و CSS لازم برای ماژول را بسازید.

```bash
npm run dev
```

_برای محیط‌های پروداکشن، از `npm run prod` استفاده کنید._

۴. **پاک کردن کش:**
برای اطمینان از اعمال صحیح تغییرات، دستورات زیر را از ریشه نصب Akaunting خود اجرا کنید:

```bash
php artisan cache:clear
php artisan config:clear
php artisan view:clear
```

۵. **فعال‌سازی و تنظیمات:**

- ماژول را از پنل مدیریت Akaunting فعال کنید.
- به تنظیمات ماژول بروید (`settings/module/edit/jalali-date`) و تنظیمات را پیکربندی کنید.

## نحوه استفاده

### تنظیمات ماژول:

پس از فعال‌سازی، به تنظیمات ماژول بروید و گزینه‌های زیر را تنظیم کنید:

- **تبدیل تاریخ‌ها به شمسی:** فعال‌سازی نمایش تاریخ‌ها به صورت شمسی در سراسر برنامه.
- **انتخابگر تاریخ شمسی پیش‌فرض:** فعال‌سازی انتخابگر تاریخ شمسی به عنوان پیش‌فرض.
- **فیلدهای فاکتور:** انتخاب فیلدهایی که در قالب فارسی فاکتور نمایش داده شوند.

### انتخابگر تاریخ:

در فیلدهای تاریخ، کاربران می‌توانند بین تقویم میلادی و شمسی با استفاده از سوئیچر "شمسی/میلادی" انتخاب کنند.

### قالب فاکتور فارسی:

در هنگام چاپ فاکتورها، گزینه "فارسی" برای استفاده از قالب اختصاصی فارسی با فونت وزیرمتن موجود است.

## سازگاری

این ماژول با **Akaunting نسخه 3.1.20** تست شده است.

## لایسنس

این پروژه تحت لایسنس MIT منتشر شده است - برای جزئیات بیشتر به فایل [LICENSE.md](LICENSE.md) مراجعه کنید.
